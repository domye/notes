## 为什么要用消息队列

### 解耦

生产者将消息放入消息队列，消费者从队列中取出消息，这样生产者与消费者就不会直接进行通信，这样也就实现了解耦，生产者只生产消息，消费者只消费消息

我的项目中的图片审批，就用了RocketMQ来做了解耦

## 异步

系统可以将那些耗时的任务放在消息队列中异步处理，以此达到快速响应用户请求的目的

比如说电商平台中，用户下单后，可以先返回一个下单成功的消息，然后将订单信息放在消息队列中，后台再去处理订单信息

## 削峰

用于应对系统高并发请求的瞬时流量高峰，通过消息队列，可以将瞬时的高峰流量转化为持续的低流量，从而保护系统不会因为瞬时的高流量而崩溃

用户将请求发送到系统后，由生产者接受并转换为消息，发送到RocketMQ中，队列用来充当缓存区，将大量请求按顺序排队，这样就可以削减请求高峰时对后端服务的直接压力

消费者从 RocketMQ 队列中按照一定速率读取消息并进行处理。可以根据后端处理能力和当前负载情况动态调整消费者的消费速率，达到填谷的效果



## 对RocketMQ的理解

![](https://cdn.domye.top/uploads/10/1761635352.webp)

RocketMQ是阿里巴巴开源的一款分布式消息中间件，具有高吞吐量、低延迟和高可用性，其主要组件包括生产者、消费者、Brocker、Topic和队列，消息由生产者发送到Brocker，再根据路由规则存储到队列中，消费者从队列中拉取消息进行处理。适用于异步解耦和流量削峰等场景